# Helsinki City Bike App

An application where you can view journey details and station details generated by bikes in Helsinki Capital area.

Dataset is downloaded from here:

- https://dev.hsl.fi/citybikes/od-trips-2021/2021-05.csv
- https://dev.hsl.fi/citybikes/od-trips-2021/2021-06.csv
- https://dev.hsl.fi/citybikes/od-trips-2021/2021-07.csv

License and Other helpful info:

- Dataset: https://opendata.arcgis.com/datasets/726277c507ef4914b0aec3cbcfcbfafc_0.csv
- License and information: https://www.avoindata.fi/data/en/dataset/hsl-n-kaupunkipyoraasemat/resource/a23eef3a-cc40-4608-8aa2-c730d17e8902

## Tech used

### Backend
* [Node.js](https://nodejs.org/)
* [Express](https://expressjs.com/)
* [TypeScript](https://www.typescriptlang.org/)
* [Docker](https://www.docker.com/)
* [Morgan](https://expressjs.com/en/resources/middleware/morgan.html)
* [Git](https://git-scm.com/)

### Frontend
* [ReactJs](https://react.dev/)
* [MaterialUI](https://mui.com/)
* [Axios](https://axios-http.com/docs/intro)
* [Tanstack query](https://tanstack.com/query/v3/)

### Storage
* [PostgreSQL](https://www.postgresql.org/)
* [Prisma ORM](https://www.prisma.io/)

### Testing
* [Jest](https://www.chaijs.com/)
* [Supertest](https://www.npmjs.com/package/supertest)
* [Cypress](https://www.cypress.io/)

## Running the app

Docker can be use to setup the dev env. Make sure you have docker installed and running.
To start dev server simply run the following command in terminal:

```
docker compose -f docker-compose.dev.yml up
```
after running the above command the app will be live on `http://localhost:3000/`

## Running the tests

Again for testing separate docker file has been created. To run the test simply run the following command.

```
docker compose -f docker-compose.test.yml up
```
The above command will run the e2e test automaticaly but to run unit test you need to open the bash for the container `backend-test` with the following command:

```
docker exec -it backend-test bash
```

After running above command you can access the terminal to the backend server and unit test can be run by `npm run test`

## API Documentation

### Journeys API

1. `/api/journeys`  return journey details and total journeys records.
 
 - `?take=10&?page=2` both "take"(number of records) and "page"(page number) are required.
 - `?sort_prop=duration&order=asc` 
 - `?filter_prop=departure_station_id&id=512`

### Stations API

1. `/api/stations/`

 - `?take=10&?page=2`

2. `/api/stations/search`

 - `?query=aa`

3. `/api/stations/${id}`

 - `12`

## Further scope of improvements

 - Functionality to add stations with help of GooglePlaces API.
 - Functionality to add journeys.
 - Cypress test can be moved into its own folder.
 - Performance can be improved using hooks like `useMemo` and `useCallback`. 
 - Adding authentication so that only some privileged use can add stations and journeys.
 - More validations can be added to database.
 - Relations can be added to database. 




